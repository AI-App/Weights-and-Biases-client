import React from 'react';
import ReactDOM from 'react-dom';
import {Spring, Keyframes, animated} from 'react-spring';
import {TimingAnimation, Easing} from 'react-spring/dist/addons.cjs';

class Loader extends React.PureComponent {
  static defaultProps = {
    travel: 15,
    duration: 600,
    kerning: 5,
    scale: 1,
  };
  height = 100;

  ascii(color = '#5F6369') {
    return [
      <animated.g id="W" fill={color}>
        <path d="M5.42,10 C8.23956396,10.0055232 10.5218302,12.293758 10.5199891,15.1133268 C10.5181481,17.9328956 8.23289557,20.2181481 5.4133268,20.2199891 C2.59375803,20.2218302 0.305523158,17.939564 0.3,15.12 C0.291958265,13.7596422 0.828802533,12.4526726 1.79073755,11.4907375 C2.75267257,10.5288025 4.05964222,9.99195827 5.42,10 L5.42,10 Z" />
        <path d="M5.42,22.13 C8.24639499,22.1300054 10.5381526,24.4202788 10.5399892,27.2466732 C10.5418257,30.0730676 8.25304624,32.3663173 5.42665365,32.3699957 C2.60026105,32.3736741 0.305520303,30.0863896 0.3,27.26 C0.291981843,25.8987321 0.828511486,24.5907529 1.79015038,23.6272359 C2.75178927,22.6637188 4.05871906,22.124638 5.42,22.13 L5.42,22.13 Z" />
        <path d="M5.42,34.27 C8.24769792,34.27 10.54,36.5623021 10.54,39.39 C10.54,42.2176979 8.24769792,44.51 5.42,44.51 C2.59230208,44.51 0.3,42.2176979 0.3,39.39 C0.294657938,38.0304609 0.832369333,36.7250628 1.79371605,35.763716 C2.75506276,34.8023693 4.06046094,34.2646579 5.42,34.27 L5.42,34.27 Z" />
        <path d="M5.42,70.67 C8.24639499,70.6700054 10.5381526,72.9602788 10.5399892,75.7866732 C10.5418257,78.6130676 8.25304624,80.9063173 5.42665365,80.9099957 C2.60026105,80.9136741 0.305520303,78.6263896 0.3,75.8 C0.291981843,74.4387321 0.828511486,73.1307529 1.79015038,72.1672359 C2.75178927,71.2037188 4.05871906,70.664638 5.42,70.67 L5.42,70.67 Z" />
        <path d="M5.42,58.62 C8.23956396,58.6255232 10.5218302,60.913758 10.5199891,63.7333268 C10.5181481,66.5528956 8.23289557,68.8381481 5.4133268,68.8399891 C2.59375803,68.8418302 0.305523158,66.559564 0.3,63.74 C0.291958265,62.3796422 0.828802533,61.0726726 1.79073755,60.1107375 C2.75267257,59.1488025 4.05964222,58.6119583 5.42,58.62 L5.42,58.62 Z" />
        <path d="M5.42,82.81 C8.24769792,82.81 10.54,85.1023021 10.54,87.93 C10.54,90.7576979 8.24769792,93.05 5.42,93.05 C2.59230208,93.05 0.3,90.7576979 0.3,87.93 C0.294657938,86.5704609 0.832369333,85.2650628 1.79371605,84.303716 C2.75506276,83.3423693 4.06046094,82.8046579 5.42,82.81 Z" />
        <path d="M8.51,3 C8.51,1.78661327 7.77907347,0.692704403 6.6580503,0.228361402 C5.53702713,-0.235981598 4.24667364,0.0206856683 3.38867966,0.878679656 C2.53068567,1.73667364 2.2740184,3.02702713 2.7383614,4.1480503 C3.2027044,5.26907347 4.29661327,6 5.51,6 C7.16685425,6 8.51,4.65685425 8.51,3 L8.51,3 Z" />
        <path d="M8.45,51.47 C8.45,49.8131458 7.10685425,48.47 5.45,48.47 C3.79314575,48.47 2.45,49.8131458 2.45,51.47 C2.45,53.1268542 3.79314575,54.47 5.45,54.47 C7.10685425,54.47 8.45,53.1268542 8.45,51.47 Z" />
      </animated.g>,
      <animated.g id="a" fill={color}>
        <path d="M6,10.19 C8.82639499,10.1900054 11.1181526,12.4802788 11.1199892,15.3066732 C11.1218257,18.1330676 8.83304624,20.4263173 6.00665365,20.4299957 C3.18026105,20.4336741 0.885520303,18.1463896 0.88,15.32 C0.871981843,13.9587321 1.40851149,12.6507529 2.37015038,11.6872359 C3.33178927,10.7237188 4.63871906,10.184638 6,10.19 Z" />
        <path d="M6,22.27 C8.82769792,22.27 11.12,24.5623021 11.12,27.39 C11.12,30.2176979 8.82769792,32.51 6,32.51 C3.17230208,32.51 0.88,30.2176979 0.88,27.39 C0.874657938,26.0304609 1.41236933,24.7250628 2.37371605,23.763716 C3.33506276,22.8023693 4.64046094,22.2646579 6,22.27 L6,22.27 Z" />
        <path d="M6,83 C8.81956396,83.0055232 11.1018302,85.293758 11.0999891,88.1133268 C11.0981481,90.9328956 8.81289557,93.2181481 5.9933268,93.2199891 C3.17375803,93.2218302 0.885523158,90.939564 0.88,88.12 C0.874657938,86.7604609 1.41236933,85.4550628 2.37371605,84.493716 C3.33506276,83.5323693 4.64046094,82.9946579 6,83 L6,83 Z" />
        <path d="M6,0.16 C4.34314575,0.16 3,1.50314575 3,3.16 C3,4.81685425 4.34314575,6.16 6,6.16 C7.65685425,6.16 9,4.81685425 9,3.16 C9,1.50314575 7.65685425,0.16 6,0.16 L6,0.16 Z" />
        <path d="M6,36.46 C4.34314575,36.46 3,37.8031458 3,39.46 C3,41.1168542 4.34314575,42.46 6,42.46 C7.65685425,42.46 9,41.1168542 9,39.46 C9,37.8031458 7.65685425,36.46 6,36.46 L6,36.46 Z" />
        <path d="M6,48.64 C4.34314575,48.64 3,49.9831458 3,51.64 C3,53.2968542 4.34314575,54.64 6,54.64 C7.65685425,54.64 9,53.2968542 9,51.64 C9,49.9831458 7.65685425,48.64 6,48.64 L6,48.64 Z" />
        <path d="M5.91,60.78 C4.25314575,60.78 2.91,62.1231458 2.91,63.78 C2.91,65.4368542 4.25314575,66.78 5.91,66.78 C7.56685425,66.78 8.91,65.4368542 8.91,63.78 C8.91,62.1231458 7.56685425,60.78 5.91,60.78 Z" />
        <path d="M6,72.91 C4.34314575,72.91 3,74.2531458 3,75.91 C3,77.5668542 4.34314575,78.91 6,78.91 C7.65685425,78.91 9,77.5668542 9,75.91 C9,74.2531458 7.65685425,72.91 6,72.91 L6,72.91 Z" />
      </animated.g>,
      <animated.g id="n" fill={color}>
        <path d="M5.51,10 C8.33769792,10 10.63,12.2923021 10.63,15.12 C10.63,17.9476979 8.33769792,20.24 5.51,20.24 C2.68230208,20.24 0.39,17.9476979 0.39,15.12 C0.384657938,13.7604609 0.922369333,12.4550628 1.88371605,11.493716 C2.84506276,10.5323693 4.15046094,9.99465794 5.51,10 Z" />
        <path d="M5.51,22.19 C8.33639499,22.1900054 10.6281526,24.4802788 10.6299892,27.3066732 C10.6318257,30.1330676 8.34304624,32.4263173 5.51665365,32.4299957 C2.69026105,32.4336741 0.395520303,30.1463896 0.39,27.32 C0.381981843,25.9587321 0.918511486,24.6507529 1.88015038,23.6872359 C2.84178927,22.7237188 4.14871906,22.184638 5.51,22.19 L5.51,22.19 Z" />
        <path d="M5.51,46.47 C8.32956396,46.4755232 10.6118302,48.763758 10.6099891,51.5833268 C10.6081481,54.4028956 8.32289557,56.6881481 5.5033268,56.6899891 C2.68375803,56.6918302 0.395523158,54.409564 0.39,51.59 C0.381958265,50.2296422 0.918802533,48.9226726 1.88073755,47.9607375 C2.84267257,46.9988025 4.14964222,46.4619583 5.51,46.47 Z" />
        <path d="M5.53,58.62 C8.34956396,58.6255232 10.6318302,60.913758 10.6299891,63.7333268 C10.6281481,66.5528956 8.34289557,68.8381481 5.5233268,68.8399891 C2.70375803,68.8418302 0.415523158,66.559564 0.41,63.74 C0.401958265,62.3796422 0.938802533,61.0726726 1.90073755,60.1107375 C2.86267257,59.1488025 4.16964222,58.6119583 5.53,58.62 L5.53,58.62 Z" />
        <path d="M5.51,70.75 C8.33769792,70.75 10.63,73.0423021 10.63,75.87 C10.63,78.6976979 8.33769792,80.99 5.51,80.99 C2.68230208,80.99 0.39,78.6976979 0.39,75.87 C0.384657938,74.5104609 0.922369333,73.2050628 1.88371605,72.243716 C2.84506276,71.2823693 4.15046094,70.7446579 5.51,70.75 L5.51,70.75 Z" />
        <path d="M5.52,0 C3.86314575,0 2.52,1.34314575 2.52,3 C2.52,4.65685425 3.86314575,6 5.52,6 C7.17685425,6 8.52,4.65685425 8.52,3 C8.52,1.34314575 7.17685425,0 5.52,0 Z" />
        <path d="M5.54,36.43 C3.88314575,36.43 2.54,37.7731458 2.54,39.43 C2.54,41.0868542 3.88314575,42.43 5.54,42.43 C7.19685425,42.43 8.54,41.0868542 8.54,39.43 C8.54,37.7731458 7.19685425,36.43 5.54,36.43 L5.54,36.43 Z" />
        <path d="M5.52,85 C3.86314575,85 2.52,86.3431458 2.52,88 C2.52,89.6568542 3.86314575,91 5.52,91 C7.17685425,91 8.52,89.6568542 8.52,88 C8.52,86.3431458 7.17685425,85 5.52,85 L5.52,85 Z" />
      </animated.g>,
      <animated.g id="d" fill={color}>
        <path d="M5.07,10.19 C7.14436534,10.1697457 9.02594848,11.4031861 9.8347804,13.3134721 C10.6436123,15.2237581 10.2198237,17.4333132 8.76160986,18.908784 C7.30339601,20.3842548 5.09897944,20.834008 3.17931026,20.0477052 C1.25964108,19.2614024 0.00415056791,17.3944601 1.40439282e-14,15.32 C-0.00797993847,13.9673889 0.521701735,12.6670097 1.47251622,11.7049429 C2.4233307,10.7428762 3.71738859,10.1979331 5.07,10.19 Z" />
        <path d="M5.07,22.33 C7.1452765,22.3097327 9.027505,23.5442485 9.83576182,25.4557673 C10.6440186,27.3672861 10.2184011,29.5776397 8.75810733,31.0523348 C7.29781359,32.5270299 5.09174312,32.9743178 3.17238467,32.1848582 C1.25302621,31.3953987 9.89639503e-05,29.5253755 1.39342612e-14,27.45 C-0.00797717985,26.0983168 0.522021395,24.7989703 1.47312106,23.838491 C2.42422073,22.8780116 3.71830359,22.3352877 5.07,22.33 Z" />
        <path d="M5.07,58.73 C7.1452765,58.7097327 9.027505,59.9442485 9.83576182,61.8557673 C10.6440186,63.7672861 10.2184011,65.9776397 8.75810733,67.4523348 C7.29781359,68.9270299 5.09174312,69.3743178 3.17238467,68.5848582 C1.25302621,67.7953987 9.89639503e-05,65.9253755 -1.45816451e-14,63.85 C-0.011079115,61.0372243 2.25725101,58.746524 5.07,58.73 Z" />
        <path d="M5.08,0.14 C3.42314575,0.14 2.08,1.48314575 2.08,3.14 C2.08,4.79685425 3.42314575,6.14 5.08,6.14 C6.73685425,6.14 8.08,4.79685425 8.08,3.14 C8.08,1.48314575 6.73685425,0.14 5.08,0.14 Z" />
        <path d="M5.08,36.56 C3.42314575,36.56 2.08,37.9031458 2.08,39.56 C2.08,41.2168542 3.42314575,42.56 5.08,42.56 C6.73685425,42.56 8.08,41.2168542 8.08,39.56 C8.08,37.9031458 6.73685425,36.56 5.08,36.56 Z" />
        <path d="M5.08,48.69 C3.42314575,48.69 2.08,50.0331458 2.08,51.69 C2.08,53.3468542 3.42314575,54.69 5.08,54.69 C6.73685425,54.69 8.08,53.3468542 8.08,51.69 C8.08,50.0331458 6.73685425,48.69 5.08,48.69 Z" />
        <path d="M5.08,73 C3.42314575,73 2.08,74.3431458 2.08,76 C2.08,77.6568542 3.42314575,79 5.08,79 C6.73685425,79 8.08,77.6568542 8.08,76 C8.08,74.3431458 6.73685425,73 5.08,73 L5.08,73 Z" />
        <path d="M5.08,85.12 C3.42314575,85.12 2.08,86.4631458 2.08,88.12 C2.08,89.7768542 3.42314575,91.12 5.08,91.12 C6.73685425,91.12 8.08,89.7768542 8.08,88.12 C8.08,86.4631458 6.73685425,85.12 5.08,85.12 Z" />
      </animated.g>,
      <animated.g id="B" fill={color}>
        <path d="M5.62,10 C8.44769792,10 10.74,12.2923021 10.74,15.12 C10.74,17.9476979 8.44769792,20.24 5.62,20.24 C2.79230208,20.24 0.5,17.9476979 0.5,15.12 C0.494657938,13.7604609 1.03236933,12.4550628 1.99371605,11.493716 C2.95506276,10.5323693 4.26046094,9.99465794 5.62,10 L5.62,10 Z" />
        <path d="M5.64,22.19 C8.46508683,22.1955232 10.7518302,24.4882352 10.7499891,27.3133268 C10.7481481,30.1384184 8.45841844,32.4281481 5.63332681,32.4299891 C2.80823519,32.4318302 0.515523157,30.1450868 0.51,27.32 C0.501958433,25.9569901 1.03985632,24.647477 2.00366666,23.6836667 C2.96747699,22.7198563 4.27699008,22.1819584 5.64,22.19 Z" />
        <path d="M5.62,70.75 C8.44769792,70.75 10.74,73.0423021 10.74,75.87 C10.74,78.6976979 8.44769792,80.99 5.62,80.99 C2.79230208,80.99 0.5,78.6976979 0.5,75.87 C0.494657938,74.5104609 1.03236933,73.2050628 1.99371605,72.243716 C2.95506276,71.2823693 4.26046094,70.7446579 5.62,70.75 L5.62,70.75 Z" />
        <path d="M5.63,0 C3.97314575,0 2.63,1.34314575 2.63,3 C2.63,4.65685425 3.97314575,6 5.63,6 C7.28685425,6 8.63,4.65685425 8.63,3 C8.63,1.34314575 7.28685425,0 5.63,0 Z" />
        <path d="M5.63,36.43 C3.97314575,36.43 2.63,37.7731458 2.63,39.43 C2.63,41.0868542 3.97314575,42.43 5.63,42.43 C7.28685425,42.43 8.63,41.0868542 8.63,39.43 C8.63,37.7731458 7.28685425,36.43 5.63,36.43 L5.63,36.43 Z" />
        <path d="M5.63,48.56 C3.97314575,48.56 2.63,49.9031458 2.63,51.56 C2.63,53.2168542 3.97314575,54.56 5.63,54.56 C7.28685425,54.56 8.63,53.2168542 8.63,51.56 C8.63,49.9031458 7.28685425,48.56 5.63,48.56 Z" />
        <path d="M5.63,60.69 C3.97314575,60.69 2.63,62.0331458 2.63,63.69 C2.63,65.3468542 3.97314575,66.69 5.63,66.69 C7.28685425,66.69 8.63,65.3468542 8.63,63.69 C8.63,62.0331458 7.28685425,60.69 5.63,60.69 Z" />
        <path d="M5.63,85 C3.97314575,85 2.63,86.3431458 2.63,88 C2.63,89.6568542 3.97314575,91 5.63,91 C7.28685425,91 8.63,89.6568542 8.63,88 C8.63,86.3431458 7.28685425,85 5.63,85 L5.63,85 Z" />
      </animated.g>,
    ];
  }

  render() {
    const items = this.ascii();
    const Content = ({radians, color, opacity}) =>
      this.ascii(color).map((letter, i) => {
        return (
          <animated.svg
            key={`k${i}`}
            style={{
              width:
                this.height /
                this.props.kerning *
                Math.max(this.props.scale, 1),
              height: this.height,
              opacity: opacity,
              willChange: 'transform',
              transform: radians.interpolate(
                r =>
                  `translate3d(0, ${this.props.travel *
                    Math.sin(r + i * 2 * Math.PI / 5)}px, 0) scale(${
                    this.props.scale
                  })`
              ),
            }}
            viewBox={`0 0 ${this.height / this.props.kerning} ${this.height}`}>
            {letter}
          </animated.svg>
        );
      });

    return (
      <div
        style={{
          position: 'absolute',
          height: this.height + 'px',
          left: '50%',
          top: '50%',
          marginTop: -this.height / 2,
          marginLeft: -this.height / 2,
        }}>
        <Keyframes
          reset
          native
          keys={items}
          impl={TimingAnimation}
          config={{duration: this.props.duration, easing: Easing.linear}}
          script={async next => {
            while (true) {
              await next(Spring, {
                from: {radians: 0, opacity: 0.7},
                to: {radians: 2 * Math.PI, opacity: 0.6},
              });
            }
          }}>
          {Content}
        </Keyframes>
      </div>
    );
  }
}

export default Loader;
